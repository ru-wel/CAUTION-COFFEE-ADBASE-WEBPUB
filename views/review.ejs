<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REVIEWS | CAUTION COFFEE</title>
    <style>
        .icon{
            width: 50px;
            height: 50px;
        }

        [type=radio] { 
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        [type=radio] + img {
            cursor: pointer;
        }

        [type=radio] + img:hover {
            outline: 2px solid rgb(61, 53, 53);
        }

        [type=radio]:checked + img {
            outline: 2px solid #f00;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"/>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>

    <%- include('header.ejs') %>

    <h2>WRITE A REVIEW</h2>
    
    <form action="/review_process" method="POST" id="reviewForm">

        <h2>Rate Us</h2>

        <!-- <input type="radio" id="" name="rating" value="1">
        <label for="">1</label><br>
        <input type="radio" id="" name="rating" value="2">
        <label for="">2</label><br>
        <input type="radio" id="" name="rating" value="3">
        <label for="">3</label><br>
        <input type="radio" id="" name="rating" value="4">
        <label for="">4</label><br>
        <input type="radio" id="" name="rating" value="5">
        <label for="">5</label><br><br> -->

        <label>
            <input type="radio" id="" name="rating" value="1" required>
            <img src="/media/coffeecup.png" alt="" class="icon">
        </label>

        <label>
            <input type="radio" id="" name="rating" value="2">
            <img src="/media/coffeecup.png" alt="" class="icon">
        </label>

        <label>
            <input type="radio" id="" name="rating" value="3">
            <img src="/media/coffeecup.png" alt="" class="icon">
        </label>

        <label>
            <input type="radio" id="" name="rating" value="4">
            <img src="/media/coffeecup.png" alt="" class="icon">
        </label>

        <label>
            <input type="radio" id="" name="rating" value="5">
            <img src="/media/coffeecup.png" alt="" class="icon">
        </label>

        <br><br>
        
        <% if (message) { %>
            <div class="alert alert-danger col-2" role="alert">
                <%= message %>
            </div>
        <% } %>

        <label for="">Message: 
            <span id="current">0</span>
            <span id="maximum">/ 300</span>
        </label> 
        
        <br>

        <textarea placeholder="Add your message here:" id="" name="message" rows="4" cols="50" maxlength="300" required></textarea><br>

        <button type="submit">Submit</button>

    </form>

    <hr>

    <h2>USER REVIEWS</h2>

    <% if (reviews && reviews.length >= 1) { %> <!-- CHECK IF MAY LAMAN BA YUNG REVIEWS DATABASE -->
        <h2>Reviews</h2>
        <% reviews.forEach(reviews => { %>  <!-- ADD LIMIT SOON PARA PAG DUMAMI YUNG MGA REVIEWS -->
            <div>
                <h3>Username: <%= reviews.username %></h3>
                <h3>Rating: <%= reviews.rating %></h3>    
                <h3>Message: <%= reviews.message %></h3>
                <h3>Date: <%= reviews.dateCreated %></h3>
                <br> <!-- FOR DISPLAY PURPOSES ONLY -->
            </div>
        <% }) %>
    <% } %>

    <%- include('footer.ejs') %>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script> // JAVASCRIPT CHARACTER COUNTER
        $('textarea').keyup(function() {
            var characterCount = $(this).val().length,
                current = $('#current'),
                maximum = $('#maximum'),
                theCount = $('#the-count');
            
            current.text(characterCount);
        
            if (characterCount == 300) {
                maximum.css('color', '#8f0001');
                current.css('color', '#8f0001');
                theCount.css('font-weight','bold');
            } 
            else {
                current.css('color', '#666');
                maximum.css('color','#666');
                theCount.css('font-weight','normal');
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

</body>
</html>

